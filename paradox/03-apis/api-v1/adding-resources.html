<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="description" content="docs">
<meta name="generator" content="Paradox, paradox-material-theme=0.4.0, mkdocs-material=2.2.2">

<meta name="lang:clipboard.copy" content="Copy to clipboard">
<meta name="lang:clipboard.copied" content="Copied to clipboard">
<meta name="lang:search.result.none" content="No matching documents">
<meta name="lang:search.result.one" content="1 matching document">
<meta name="lang:search.result.other" content="# matching documents">
<meta name="lang:search.language" content="">
<meta name="lang:search.tokenizer" content="[\s\-]+">


<meta name="description" content="docs">
<link rel="shortcut icon" href="../../cloud">
<title>Adding Resources Â· Knora Documentation</title>
<link rel="stylesheet" href="../../assets/stylesheets/application.7a4cdee3.css">
<link rel="stylesheet" href="../../assets/stylesheets/application-palette.792431c1.css">
<link rel="stylesheet" href="../../lib/material__tabs/dist/mdc.tabs.min.css">
<link rel="stylesheet" href="../../lib/prettify/prettify.css">
<script src="../../lib/modernizr/modernizr.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
<style>
body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}
code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}
</style>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="../../assets/stylesheets/paradox-material-theme.css">
</head>
<body
data-md-color-primary="blue"
data-md-color-accent="yellow"
>
<input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
<input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
<label class="md-overlay" data-md-component="overlay" for="drawer"></label>
<header class="md-header" data-md-component="header">
<nav class="md-header-nav md-grid">
<div class="md-flex">
<div class="md-flex__cell md-flex__cell--shrink">
<a href="../../index.html" title="Knora Documentation" class="md-header-nav__button md-logo">
<i class="md-icon">cloud</i>
</a>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
</div>
<div class="md-flex__cell md-flex__cell--stretch">
<div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
<span class="md-header-nav__topic">
Knora Documentation
</span>
<span class="md-header-nav__topic">
Adding Resources
</span>
</div>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="search"></label>
<div class="md-search__inner">
<form class="md-search__form" name="search">
<input type="text" class="md-search__input" name="query" required placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
<label class="md-icon md-search__icon" for="search"></label>
<button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix>
<div class="md-search-result" data-md-component="result">
<div class="md-search-result__meta">
Type to start searching
</div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>

</div>
<div class="md-flex__cell md-flex__cell--shrink">
<div class="md-header-nav__source">
<a href="https://github.com/dhlab-basel/Knora/docs"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
dhlab-basel/Knora/docs
</div>
</a>

</div>
</div>
</div>
</nav>
</header>

<div class="md-container">
<main class="md-main">
<div class="md-main__inner md-grid" data-md-component="container">
<div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--primary" data-md-level="0" style="visibility: hidden">
<label class="md-nav__title md-nav__title--site" for="drawer">
<span class="md-nav__button md-logo">
<i class="md-icon">cloud</i>
</span>
<a href="../../index.html" title="Knora Documentation">
Knora Documentation
</a>
</label>
<div class="md-nav__source">
<a href="https://github.com/dhlab-basel/Knora/docs"
title="Go to repository"
class="md-source"
data-md-source="github">
<div class="md-source__icon">
<i class="fa fa-github"></i>
</div>
<div class="md-source__repository">
dhlab-basel/Knora/docs
</div>
</a>

</div>
<ul>
  <li><a href="../../01-introduction/index.html" class="page">Introduction</a>
  <ul>
    <li><a href="../../01-introduction/what-is-knora.html" class="page">What Is Knora?</a></li>
    <li><a href="../../01-introduction/data-formats.html" class="page">Data Formats in Knora</a></li>
    <li><a href="../../01-introduction/standoff-rdf.html" class="page">Standoff/RDF Text Markup</a></li>
    <li><a href="../../01-introduction/example-project.html" class="page">An Example Project</a></li>
  </ul></li>
  <li><a href="../../02-knora-ontologies/index.html" class="page">Knora Ontologies</a>
  <ul>
    <li><a href="../../02-knora-ontologies/introduction.html" class="page">Introduction</a></li>
    <li><a href="../../02-knora-ontologies/knora-base.html" class="page">The Knora Base Ontology</a></li>
    <li><a href="../../02-knora-ontologies/salsah-gui.html" class="page">The SALSAH GUI Ontology</a></li>
  </ul></li>
  <li><a href="../../03-apis/index.html" class="page">The Knora APIs</a>
  <ul>
    <li><a href="../../03-apis/api-v1/index.html" class="page">Knora API v1</a></li>
    <li><a href="../../03-apis/api-v2/index.html" class="page">Knora API v2</a></li>
    <li><a href="../../03-apis/api-admin/index.html" class="page">Knora Admin API</a></li>
  </ul></li>
  <li><a href="../../04-publishing-deployment/index.html" class="page">Deploying Knora</a>
  <ul>
    <li><a href="../../04-publishing-deployment/publishing.html" class="page">Publishing</a></li>
    <li><a href="../../04-publishing-deployment/getting-started.html" class="page">Getting Started with Knora</a></li>
    <li><a href="../../04-publishing-deployment/configuration.html" class="page">Configuration</a></li>
    <li><a href="../../04-publishing-deployment/updates.html" class="page">Updating Repositories When Upgrading Knora</a></li>
  </ul></li>
  <li><a href="../../05-internals/index.html" class="page">Knora Internals</a>
  <ul>
    <li><a href="../../05-internals/design/index.html" class="page">Design</a></li>
    <li><a href="../../05-internals/development/index.html" class="page">Development</a></li>
  </ul></li>
  <li><a href="../../06-salsah/index.html" class="page">The SALSAH 1 GUI</a></li>
  <li><a href="../../07-sipi/index.html" class="page">The Sipi Media Server</a>
  <ul>
    <li><a href="../../07-sipi/setup-sipi-for-knora.html" class="page">Setting Up Sipi for Knora</a></li>
    <li><a href="../../07-sipi/sipi-and-knora.html" class="page">Interaction Between Sipi and Knora</a></li>
  </ul></li>
  <li><a href="../../08-lucene/index.html" class="page">Lucene</a>
  <ul>
    <li><a href="../../08-lucene/lucene-query-parser-syntax.html" class="page">Lucene Query Parser Syntax</a></li>
  </ul></li>
  <li><a href="../../faq.html" class="page">Frequently Asked Questions</a></li>
  <li><a href="../../00-release-notes/index.html" class="page">Release Notes</a>
  <ul>
    <li><a href="../../00-release-notes/v1.1.0.html" class="page">v1.1.0 Release Notes</a></li>
    <li><a href="../../00-release-notes/v1.2.0.html" class="page">v1.2.0 Release Notes</a></li>
    <li><a href="../../00-release-notes/v1.3.0.html" class="page">v1.3.0 Release Notes</a></li>
    <li><a href="../../00-release-notes/v1.4.0.html" class="page">v1.4.0 Release Notes</a></li>
    <li><a href="../../00-release-notes/v1.5.0.html" class="page">v1.5.0 Release Notes</a></li>
    <li><a href="../../00-release-notes/v1.6.0.html" class="page">v1.6.0 Release Notes</a></li>
    <li><a href="../../00-release-notes/v1.7.0.html" class="page">v1.7.x Release Notes</a></li>
    <li><a href="../../00-release-notes/v2.x.x.html" class="page">v2.x.x Release Notes</a></li>
    <li><a href="../../00-release-notes/v3.x.x.html" class="page">v3.x.x Release Notes</a></li>
    <li><a href="../../00-release-notes/v4.x.x.html" class="page">v4.x.x Release Notes</a></li>
    <li><a href="../../00-release-notes/v5.x.x.html" class="page">v5.x.x Release Notes</a></li>
    <li><a href="../../00-release-notes/v6.x.x.html" class="page">v6.x.x Release Notes</a></li>
    <li><a href="../../00-release-notes/next.html" class="page">Release Notes for Next Release</a></li>
    <li><a href="../../00-release-notes/migration.html" class="page">Migration Notes</a></li>
  </ul></li>
</ul>
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="toc">Table of contents</label>
<ul>
  <li><a href="../../03-apis/api-v1/adding-resources.html#adding-resources" class="header">Adding Resources</a>
  <ul>
    <li><a href="../../03-apis/api-v1/adding-resources.html#adding-resources-without-image-files" class="header">Adding Resources Without Image Files</a></li>
    <li><a href="../../03-apis/api-v1/adding-resources.html#adding-resources-with-image-files" class="header">Adding Resources with Image Files</a></li>
    <li><a href="../../03-apis/api-v1/adding-resources.html#response-to-a-resource-creation" class="header">Response to a Resource Creation</a></li>
    <li><a href="../../03-apis/api-v1/adding-resources.html#changing-a-resources-label" class="header">Changing a Resource&rsquo;s Label</a></li>
    <li><a href="../../03-apis/api-v1/adding-resources.html#bulk-import" class="header">Bulk Import</a></li>
  </ul></li>
</ul>
</nav>

<div class="md-nav__title--site md-version" title="Version">
<i class="md-icon">label_outline</i> 10.0.0
</div>
</nav>

</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav class="md-nav md-nav--secondary">
<label class="md-nav__title" for="toc">Table of contents</label>
<ul>
  <li><a href="../../03-apis/api-v1/adding-resources.html#adding-resources" class="header">Adding Resources</a>
  <ul>
    <li><a href="../../03-apis/api-v1/adding-resources.html#adding-resources-without-image-files" class="header">Adding Resources Without Image Files</a></li>
    <li><a href="../../03-apis/api-v1/adding-resources.html#adding-resources-with-image-files" class="header">Adding Resources with Image Files</a></li>
    <li><a href="../../03-apis/api-v1/adding-resources.html#response-to-a-resource-creation" class="header">Response to a Resource Creation</a></li>
    <li><a href="../../03-apis/api-v1/adding-resources.html#changing-a-resources-label" class="header">Changing a Resource&rsquo;s Label</a></li>
    <li><a href="../../03-apis/api-v1/adding-resources.html#bulk-import" class="header">Bulk Import</a></li>
  </ul></li>
</ul>
</nav>

</div>
</div>
</div>
<div class="md-content">
<article class="md-content__inner md-typeset">
<div class="md-content__searchable">
<!---
Copyright Â© 2015-2019 the contributors (see Contributors.md).

This file is part of Knora.

Knora is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published
by the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Knora is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public
License along with Knora.  If not, see <http://www.gnu.org/licenses/>.
-->
<h1><a href="#adding-resources" name="adding-resources" class="anchor"><span class="anchor-link"></span></a>Adding Resources</h1>
<div class="toc ">
<ul>
  <li><a href="../../03-apis/api-v1/adding-resources.html#adding-resources-without-image-files" class="header">Adding Resources Without Image Files</a></li>
  <li><a href="../../03-apis/api-v1/adding-resources.html#adding-resources-with-image-files" class="header">Adding Resources with Image Files</a>
  <ul>
    <li><a href="../../03-apis/api-v1/adding-resources.html#including-the-binaries-non-gui-case-" class="header">Including the binaries (non-GUI case)</a></li>
    <li><a href="../../03-apis/api-v1/adding-resources.html#indicating-the-location-of-a-file-gui-case-" class="header">Indicating the location of a file (GUI case)</a></li>
  </ul></li>
  <li><a href="../../03-apis/api-v1/adding-resources.html#response-to-a-resource-creation" class="header">Response to a Resource Creation</a></li>
  <li><a href="../../03-apis/api-v1/adding-resources.html#changing-a-resources-label" class="header">Changing a Resource&rsquo;s Label</a></li>
  <li><a href="../../03-apis/api-v1/adding-resources.html#bulk-import" class="header">Bulk Import</a>
  <ul>
    <li><a href="../../03-apis/api-v1/adding-resources.html#bulk-import-example" class="header">Bulk Import Example</a>
    <ul>
      <li><a href="../../03-apis/api-v1/adding-resources.html#1-get-xml-schemas" class="header">1. Get XML Schemas</a></li>
      <li><a href="../../03-apis/api-v1/adding-resources.html#2-generate-xml-import-document" class="header">2. Generate XML Import Document</a></li>
      <li><a href="../../03-apis/api-v1/adding-resources.html#3-validate-xml-import-document" class="header">3. Validate XML Import Document</a></li>
      <li><a href="../../03-apis/api-v1/adding-resources.html#4-submit-xml-import-document-to-knora" class="header">4. Submit XML Import Document to Knora</a></li>
    </ul></li>
    <li><a href="../../03-apis/api-v1/adding-resources.html#bulk-import-with-links-to-existing-resources" class="header">Bulk Import with Links to Existing Resources</a></li>
    <li><a href="../../03-apis/api-v1/adding-resources.html#bulk-import-with-image-files" class="header">Bulk Import with Image Files</a></li>
  </ul></li>
</ul>
</div>
<p>To create a resource, the HTTP method <code>POST</code> has to be used. The request has to be sent to the Knora server using the <code>resources</code> path segment:</p>
<pre><code>HTTP POST to http://host/v1/resources
</code></pre>
<p>Unlike in the case of GET requests, the request body consists of JSON describing the resource to be created.</p>
<p>Creating resources requires authentication since only known users may add resources.</p>
<h2><a href="#adding-resources-without-image-files" name="adding-resources-without-image-files" class="anchor"><span class="anchor-link"></span></a>Adding Resources Without Image Files</h2>
<p>The format of the JSON used to create a resource without an image file is described in the TypeScript interface <code>createResourceWithoutRepresentationRequest</code> in module <code>createResourceFormats</code>. It requires the IRI of the resource class the new resource belongs to, a label describing the new resource, the IRI of the project the new resource belongs to, and the properties to be assigned to the new resource.</p>
<p>The request header&rsquo;s content type has to be set to <code>application/json</code>.</p>
<h2><a href="#adding-resources-with-image-files" name="adding-resources-with-image-files" class="anchor"><span class="anchor-link"></span></a>Adding Resources with Image Files</h2>
<p>Certain resource classes can have attached image files. There are two ways to attach a file to a resource: Either by submitting directly the binaries of the file in a an HTTP Multipart request, or by indicating the location of the file. The two cases are referred to as non-GUI case and GUI case (see <a href="../../07-sipi/sipi-and-knora.html">Sipi and Knora</a>).</p>
<h3><a href="#including-the-binaries-non-gui-case-" name="including-the-binaries-non-gui-case-" class="anchor"><span class="anchor-link"></span></a>Including the binaries (non-GUI case)</h3>
<p>In order to include the binaries, a HTTP Multipart request has to be sent. One part contains the JSON (same format as described for <a href="#adding-resources-without-a-digital-representation">Adding Resources Without Images Files</a>) and has to be named <code>json</code>. The other part contains the file&rsquo;s name, its binaries, and its mime type and has to be named <code>file</code>. The following example illustrates how to make this type of request using Python 3:</p>
<pre class="prettyprint"><code class="language-python">#!/usr/bin/env python3

import requests, json

# a Python dictionary that will be turned into a JSON object
resourceParams = {
   &#39;restype_id&#39;: &#39;http://www.knora.org/ontology/test#testType&#39;,
   &#39;properties&#39;: {
       &#39;http://www.knora.org/ontology/test#testtext&#39;: [
           {&#39;richtext_value&#39;: {&#39;utf8str&#39;: &quot;test&quot;}}
       ],
       &#39;http://www.knora.org/ontology/test#testnumber&#39;: [
           {&#39;int_value&#39;: 1}
       ]
   },
   &#39;label&#39;: &quot;test resource&quot;,
   &#39;project_id&#39;: &#39;http://rdfh.ch/projects/testproject&#39;
}

# the name of the file to be submitted
filename = &quot;myimage.jpg&quot;

# a tuple containing the file&#39;s name, its binaries and its mimetype
file = {&#39;file&#39;: (filename, open(filename, &#39;rb&#39;), &quot;image/jpeg&quot;)} # use name &quot;file&quot;

# do a POST request providing both the JSON and the binaries
r = requests.post(&quot;http://host/v1/resources&quot;,
                  data={&#39;json&#39;: json.dumps(resourceParams)}, # use name &quot;json&quot;
                  files=file,
                  auth=(&#39;user&#39;, &#39;password&#39;))
</code></pre>
<p>Please note that the file has to be read in binary mode (by default it would be read in text mode).</p>
<h3><a href="#indicating-the-location-of-a-file-gui-case-" name="indicating-the-location-of-a-file-gui-case-" class="anchor"><span class="anchor-link"></span></a>Indicating the location of a file (GUI case)</h3>
<p>This request works similarly to <a href="#adding-resources-without-a-digital-representation">Adding Resources Without Image Files</a>. The JSON format is described in the TypeScript interface <code>createResourceWithRepresentationRequest</code> in module <code>createResourceFormats</code>. The request header&rsquo;s content type has to set to <code>application/json</code>.</p>
<p>In addition to <a href="#adding-resources-without-a-digital-representation">Adding Resources Without Image Files</a>, the (temporary) name of the file, its original name, and mime type have to be provided (see <a href="../../07-sipi/sipi-and-knora.html#gui-case">GUI Case</a>).</p>
<h2><a href="#response-to-a-resource-creation" name="response-to-a-resource-creation" class="anchor"><span class="anchor-link"></span></a>Response to a Resource Creation</h2>
<p>When a resource has been successfully created, Knora sends back a JSON containing the new resource&rsquo;s IRI (<code>res_id</code>) and its properties. The resource IRI identifies the resource and can be used to perform future Knora API V1 operations.</p>
<p>The JSON format of the response is described in the TypeScript interface <code>createResourceResponse</code> in module <code>createResourceFormats</code>.</p>
<h2><a href="#changing-a-resources-label" name="changing-a-resources-label" class="anchor"><span class="anchor-link"></span></a>Changing a Resource&rsquo;s Label</h2>
<p>A resource&rsquo;s label can be changed by making a PUT request to the path segments <code>resources/label</code>. The resource&rsquo;s Iri has to be provided in the URL (as its last segment). The new label has to submitted as JSON in the HTTP request&rsquo;s body.</p>
<pre><code>HTTP PUT to http://host/v1/resources/label/resourceIRI
</code></pre>
<p>The JSON format of the request is described in the TypeScript interface <code>changeResourceLabelRequest</code> in module <code>createResourceFormats</code>. The response is described in the TypeScript interface <code>changeResourceLabelResponse</code> in module <code>createResourceFormats</code>.</p>
<h2><a href="#bulk-import" name="bulk-import" class="anchor"><span class="anchor-link"></span></a>Bulk Import</h2>
<p>If you have a large amount of data to import into Knora, it can be more convenient to use the bulk import feature than to create resources one by one. In a bulk import operation, you submit an XML document to Knora, describing multiple resources to be created. This is especially useful if the resources to be created have links to one another. Knora checks the entire request for consistency as as a whole, and performs the update in a single database transaction.</p>
<p>Only system or project administrators may use the bulk import.</p>
<p>The procedure for using this feature is as follows (see the <a href="adding-resources.html#bulk-import-example">example below</a>).</p>
<ol>
  <li>Make an HTTP GET request to Knora to <a href="adding-resources.html#1-get-xml-schemas">get XML schemas</a> describing the XML to be provided for the import.</li>
  <li><a href="adding-resources.html#2-generate-xml-import-document">Generate an XML import document</a> representing the data to be imported, following the Knora import schemas that were generated in step 1. You will probably want to write a script to do this. Knora is not involved in this step. If you are also importing image files, this XML document needs to <a href="adding-resources.html#bulk-import-with-image-files">contain the filesystem paths</a> of those files.</li>
  <li><a href="adding-resources.html#3-validate-xml-import-document">Validate your XML import document</a>, using an XML schema validator such as <a href="http://xerces.apache.org">Apache Xerces</a> or <a href="http://www.saxonica.com">Saxon</a>, or an XML development environment such as <a href="https://www.oxygenxml.com">Oxygen</a>. This will help ensure that the data you submit to Knora is correct. Knora is not involved in this step.</li>
  <li><a href="adding-resources.html#4-submit-xml-import-document-to-knora">Submit the XML import document to Knora</a>.</li>
</ol>
<p>In this procedure, the person responsible for generating the XML import data need not be familiar with RDF or with the ontologies involved.</p>
<p>When Knora receives an XML import, it validates it first using the relevant XML schemas, and then using the same internal checks that it performs when creating any resource.</p>
<p>The details of the XML import format are illustrated in the following examples.</p>
<h3><a href="#bulk-import-example" name="bulk-import-example" class="anchor"><span class="anchor-link"></span></a>Bulk Import Example</h3>
<p>Suppose we have a project with existing data (but no image files), which we want to import into Knora. We have created an ontology called <code>http://www.knora.org/ontology/0801/biblio</code> for the project, and this ontology also uses definitions from another ontology, called <code>http://www.knora.org/ontology/0801/beol</code>.</p>
<h4><a href="#1-get-xml-schemas" name="1-get-xml-schemas" class="anchor"><span class="anchor-link"></span></a>1. Get XML Schemas</h4>
<p>To get XML schemas for an import, we use the following route, specifying the (URL-encoded) IRI of our project&rsquo;s main ontology (in this case <code>http://www.knora.org/ontology/0801/biblio</code>):</p>
<pre><code>HTTP GET to http://host/v1/resources/xmlimportschemas/ontologyIRI
</code></pre>
<p>In our example, the URL could be:</p>
<pre><code>http://localhost:3333/v1/resources/xmlimportschemas/http%3A%2F%2Fwww.knora.org%2Fontology%2F0801%2Fbiblio
</code></pre>
<p>This returns a Zip archive called <code>p0801-biblio-xml-schemas.zip</code>, containing three files:</p>
<ul>
  <li>
  <p><code>p0801-biblio.xsd</code>: The schema for our main ontology.</p></li>
  <li>
  <p><code>p0801-beol.xsd</code>: A schema for another ontology that our main ontology depends on.</p></li>
  <li>
  <p><code>knoraXmlImport.xsd</code>: The standard Knora XML import schema, used by all XML imports.</p></li>
</ul>
<h4><a href="#2-generate-xml-import-document" name="2-generate-xml-import-document" class="anchor"><span class="anchor-link"></span></a>2. Generate XML Import Document</h4>
<p>We now convert our existing data to XML, probably by writing a custom script. The resulting XML import document could look like this:</p>
<pre class="prettyprint"><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;knoraXmlImport:resources xmlns=&quot;http://api.knora.org/ontology/0801/biblio/xml-import/v1#&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://api.knora.org/ontology/0801/biblio/xml-import/v1# p0801-biblio.xsd&quot;
    xmlns:p0801-biblio=&quot;http://api.knora.org/ontology/0801/biblio/xml-import/v1#&quot;
    xmlns:p0801-beol=&quot;http://api.knora.org/ontology/0801/beol/xml-import/v1#&quot;
    xmlns:knoraXmlImport=&quot;http://api.knora.org/ontology/knoraXmlImport/v1#&quot;&gt;
    &lt;p0801-beol:person id=&quot;abel&quot;&gt;
        &lt;knoraXmlImport:label&gt;Niels Henrik Abel&lt;/knoraXmlImport:label&gt;
        &lt;p0801-beol:hasFamilyName knoraType=&quot;richtext_value&quot;&gt;Abel&lt;/p0801-beol:hasFamilyName&gt;
        &lt;p0801-beol:hasGivenName knoraType=&quot;richtext_value&quot;&gt;Niels Henrik&lt;/p0801-beol:hasGivenName&gt;
        &lt;p0801-beol:personHasTitle knoraType=&quot;richtext_value&quot; lang=&quot;en&quot;&gt;Sir&lt;/p0801-beol:personHasTitle&gt;
    &lt;/p0801-beol:person&gt;
    &lt;p0801-beol:person id=&quot;holmes&quot;&gt;
        &lt;knoraXmlImport:label&gt;Sherlock Holmes&lt;/knoraXmlImport:label&gt;
        &lt;p0801-beol:hasFamilyName knoraType=&quot;richtext_value&quot;&gt;Holmes&lt;/p0801-beol:hasFamilyName&gt;
        &lt;p0801-beol:hasGivenName knoraType=&quot;richtext_value&quot;&gt;Sherlock&lt;/p0801-beol:hasGivenName&gt;
    &lt;/p0801-beol:person&gt;
    &lt;p0801-biblio:Journal id=&quot;math_intelligencer&quot;&gt;
        &lt;knoraXmlImport:label&gt;Math Intelligencer&lt;/knoraXmlImport:label&gt;
        &lt;p0801-biblio:hasName knoraType=&quot;richtext_value&quot;&gt;Math Intelligencer&lt;/p0801-biblio:hasName&gt;
    &lt;/p0801-biblio:Journal&gt;
    &lt;p0801-biblio:JournalArticle id=&quot;strings_in_the_16th_and_17th_centuries&quot; creationDate=&quot;2019-01-09T15:45:54Z&quot;&gt;
        &lt;knoraXmlImport:label&gt;Strings in the 16th and 17th Centuries&lt;/knoraXmlImport:label&gt;
        &lt;p0801-biblio:p0801-beol__comment knoraType=&quot;richtext_value&quot; mapping_id=&quot;http://rdfh.ch/standoff/mappings/StandardMapping&quot;&gt;
            &lt;text xmlns=&quot;&quot;&gt;The most &lt;strong&gt;interesting&lt;/strong&gt; article in &lt;a class=&quot;salsah-link&quot; href=&quot;ref:math_intelligencer&quot;&gt;Math Intelligencer&lt;/a&gt;.&lt;/text&gt;
        &lt;/p0801-biblio:p0801-beol__comment&gt;
        &lt;p0801-biblio:endPage knoraType=&quot;richtext_value&quot;&gt;73&lt;/p0801-biblio:endPage&gt;
        &lt;p0801-biblio:isPartOfJournal&gt;
            &lt;p0801-biblio:Journal knoraType=&quot;link_value&quot; target=&quot;math_intelligencer&quot; linkType=&quot;ref&quot;/&gt;
        &lt;/p0801-biblio:isPartOfJournal&gt;
        &lt;p0801-biblio:journalVolume knoraType=&quot;richtext_value&quot;&gt;27&lt;/p0801-biblio:journalVolume&gt;
        &lt;p0801-biblio:publicationHasAuthor&gt;
            &lt;p0801-beol:person knoraType=&quot;link_value&quot; linkType=&quot;ref&quot; target=&quot;abel&quot;/&gt;
        &lt;/p0801-biblio:publicationHasAuthor&gt;
        &lt;p0801-biblio:publicationHasAuthor&gt;
            &lt;p0801-beol:person knoraType=&quot;link_value&quot; linkType=&quot;ref&quot; target=&quot;holmes&quot;/&gt;
        &lt;/p0801-biblio:publicationHasAuthor&gt;
        &lt;p0801-biblio:publicationHasDate knoraType=&quot;date_value&quot;&gt;GREGORIAN:1976&lt;/p0801-biblio:publicationHasDate&gt;
        &lt;p0801-biblio:publicationHasTitle knoraType=&quot;richtext_value&quot; lang=&quot;en&quot;&gt;Strings in the 16th and 17th Centuries&lt;/p0801-biblio:publicationHasTitle&gt;
        &lt;p0801-biblio:publicationHasTitle knoraType=&quot;richtext_value&quot;&gt;An alternate title&lt;/p0801-biblio:publicationHasTitle&gt;
        &lt;p0801-biblio:startPage knoraType=&quot;richtext_value&quot;&gt;48&lt;/p0801-biblio:startPage&gt;
    &lt;/p0801-biblio:JournalArticle&gt;
&lt;/knoraXmlImport:resources&gt;
</code></pre>
<p>This illustrates several aspects of XML imports:</p>
<ul>
  <li>
  <p>The root XML element must be <code>knoraXmlImport:resources</code>.</p></li>
  <li>
  <p>There is an XML namespace corresponding each ontology used in the import. These namespaces can be found in the XML schema files returned by Knora.</p></li>
  <li>
  <p>We have copied and pasted <code>xmlns=&quot;http://api.knora.org/ontology/0801/biblio/xml-import/v1#&quot;</code> from the main XML schema, <code>p0801-biblio.xsd</code>. This enables the Knora API server to identify the main ontology we are using.</p></li>
  <li>
  <p>We have used <code>xsi:schemaLocation</code> to indicate the main schema&rsquo;s namespace and filename. If we put our XML document in the same directory as the schemas, and we run an XML validator to check the XML, it should load the schemas.</p></li>
  <li>
  <p>The child elements of <code>knoraXmlImport:resources</code> represent resources to be created. The order of these elements is unimportant.</p></li>
  <li>
  <p>Each resource must have an ID, which must be an XML <a href="https://www.w3.org/TR/REC-xml-names/#NT-NCName">NCName</a>, and must be unique within the file. These IDs are used only during the import, and will not be stored in the triplestore.</p></li>
  <li>
  <p>Each resource can optionally have a <code>creationDate</code> attribute, which can be an <a href="https://www.w3.org/TR/xmlschema11-2/#dateTime">xsd:dateTime</a> or an <a href="https://www.w3.org/TR/xmlschema11-2/#dateTimeStamp">xsd:dateTimeStamp</a>. If <code>creationDate</code> is not supplied, the current time is used.</p></li>
  <li>
  <p>The first child element of each resource must be a <code>knoraXmlImport:label</code>, which will be stored as the resource&rsquo;s <code>rdfs:label</code>.</p></li>
  <li>
  <p>Optionally, the second child element of a resource can provide metadata about a file to be attached to the resource (see bulk-import-with-digital-representations).</p></li>
  <li>
  <p>The remaining child elements of each resource represent its property values. These must be sorted in alphabetical order by property name.</p></li>
  <li>
  <p>If a property has mutliple values, these are represented as multiple adjacent property elements.</p></li>
  <li>
  <p>The type of each value must be specified using the attribute <code>knoraType</code>.</p></li>
  <li>
  <p>A link to another resource described in the XML import is represented as a child element of a property element, with attributes <code>knoraType=&quot;link_value&quot;</code> and <code>linkType=&quot;ref&quot;</code>, and a <code>target</code> attribute containing the ID of the target resource.</p></li>
  <li>
  <p>There is a specfic syntax for referring to properties from other ontologies. In the example, <code>p0801-beol:comment</code> is defined in the ontology <code>http://www.knora.org/ontology/0001/beol</code>. In the XML, we refer to it as <code>p0801-biblio:p0801-beol__comment</code>.</p></li>
  <li>
    <p>A text value can contain XML markup. If it does:</p>
    <ul>
      <li>The text value element must have the attribute <code>mapping_id</code>, specifying a mapping from XML to standoff markup (see XML-to-standoff-mapping).</li>
      <li>It is necessary to specify the appropriate XML namespace (in this case the null namespace, <code>xmlns=&quot;&quot;</code>) for the XML markup in the text value.</li>
      <li>The XML markup in the text value will not be validated by the schema.</li>
      <li>In an XML tag that is mapped to a standoff link tag, the link target can refer either to the IRI of a resoruce that already exists in the triplestore, or to the ID of a resource described in the import. If a link points to a resource described in the import, the ID of the target resource must be prefixed with <code>ref:</code>. In the example above, using the standard mapping, the standoff link to <code>math_intelligencer</code> has the target <code>ref:math_intelligencer</code>.</li>
    </ul>
  </li>
  <li>
  <p>A text value can have a <code>lang</code> attribute, whose value is an ISO 639-1 code specifying the language of the text.</p></li>
</ul>
<h4><a href="#3-validate-xml-import-document" name="3-validate-xml-import-document" class="anchor"><span class="anchor-link"></span></a>3. Validate XML Import Document</h4>
<p>You can use an XML schema validator such as <a href="http://xerces.apache.org">Apache Xerces</a> or <a href="http://saxon.sourceforge.net/">Saxon</a>, or an XML development environment such as <a href="https://www.oxygenxml.com">Oxygen</a>, to check that your XML import document is valid according to the schemas you got from Knora.</p>
<p>For example, using Saxon:</p>
<pre><code>java -cp ./saxon9ee.jar com.saxonica.Validate -xsd:p0801-biblio.xsd -s:data.xml
</code></pre>
<h4><a href="#4-submit-xml-import-document-to-knora" name="4-submit-xml-import-document-to-knora" class="anchor"><span class="anchor-link"></span></a>4. Submit XML Import Document to Knora</h4>
<p>To create these resources in Knora, make an HTTP post request with the XML import document as the request body. The URL must specify the (URL-encoded) IRI of the project in which the resources should be created:</p>
<pre><code>HTTP POST to http://host/v1/resources/xmlimport/projectIRI
</code></pre>
<p>For example, using <a href="https://curl.haxx.se/">curl</a>:</p>
<pre><code>curl -v -u root@example.com:test --data @data.xml --header &quot;Content-Type: application/xml&quot; http://localhost:3333/v1/resources/xmlimport/http%3A%2F%2Frdfh.ch%2Fprojects%2F0801
</code></pre>
<h3><a href="#bulk-import-with-links-to-existing-resources" name="bulk-import-with-links-to-existing-resources" class="anchor"><span class="anchor-link"></span></a>Bulk Import with Links to Existing Resources</h3>
<p>Having run the import in the previous example, we can import more data with links to the data that is now in the triplestore:</p>
<pre class="prettyprint"><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;knoraXmlImport:resources xmlns=&quot;http://api.knora.org/ontology/0801/biblio/xml-import/v1#&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://api.knora.org/ontology/0801/biblio/xml-import/v1# p0801-biblio.xsd&quot;
    xmlns:p0801-biblio=&quot;http://api.knora.org/ontology/0801/biblio/xml-import/v1#&quot;
    xmlns:p0801-beol=&quot;http://api.knora.org/ontology/0801/beol/xml-import/v1#&quot;
    xmlns:knoraXmlImport=&quot;http://api.knora.org/ontology/knoraXmlImport/v1#&quot;&gt;
    &lt;p0801-biblio:JournalArticle id=&quot;strings_in_the_18th_century&quot;&gt;
        &lt;knoraXmlImport:label&gt;Strings in the 18th Century&lt;/knoraXmlImport:label&gt;
        &lt;p0801-biblio:p0801-beol__comment knoraType=&quot;richtext_value&quot; mapping_id=&quot;http://rdfh.ch/standoff/mappings/StandardMapping&quot;&gt;
            &lt;text xmlns=&quot;&quot;&gt;The most &lt;strong&gt;boring&lt;/strong&gt; article in &lt;a class=&quot;salsah-link&quot; href=&quot;http://rdfh.ch/biblio/QMDEHvBNQeOdw85Z2NSi9A&quot;&gt;Math Intelligencer&lt;/a&gt;.&lt;/text&gt;
        &lt;/p0801-biblio:p0801-beol__comment&gt;
        &lt;p0801-biblio:endPage knoraType=&quot;richtext_value&quot;&gt;76&lt;/p0801-biblio:endPage&gt;
        &lt;p0801-biblio:isPartOfJournal&gt;
            &lt;p0801-biblio:Journal knoraType=&quot;link_value&quot; linkType=&quot;iri&quot; target=&quot;http://rdfh.ch/biblio/QMDEHvBNQeOdw85Z2NSi9A&quot;/&gt;
        &lt;/p0801-biblio:isPartOfJournal&gt;
        &lt;p0801-biblio:journalVolume knoraType=&quot;richtext_value&quot;&gt;27&lt;/p0801-biblio:journalVolume&gt;
        &lt;p0801-biblio:publicationHasAuthor&gt;
            &lt;p0801-beol:person knoraType=&quot;link_value&quot; linkType=&quot;iri&quot; target=&quot;http://rdfh.ch/biblio/c-xMB3qkRs232pWyjdUUvA&quot;/&gt;
        &lt;/p0801-biblio:publicationHasAuthor&gt;
        &lt;p0801-biblio:publicationHasDate knoraType=&quot;date_value&quot;&gt;GREGORIAN:1977&lt;/p0801-biblio:publicationHasDate&gt;
        &lt;p0801-biblio:publicationHasTitle knoraType=&quot;richtext_value&quot;&gt;Strings in the 18th Century&lt;/p0801-biblio:publicationHasTitle&gt;
        &lt;p0801-biblio:startPage knoraType=&quot;richtext_value&quot;&gt;52&lt;/p0801-biblio:startPage&gt;
    &lt;/p0801-biblio:JournalArticle&gt;
&lt;/knoraXmlImport:resources&gt;
</code></pre>
<p>Note that in the link elements referring to existing resources, the <code>linkType</code> attribute has the value <code>iri</code>, and the <code>target</code> attribute contains the IRI of the target resource.</p>
<h3><a href="#bulk-import-with-image-files" name="bulk-import-with-image-files" class="anchor"><span class="anchor-link"></span></a>Bulk Import with Image Files</h3>
<p>To attach an image file to a resource, we must provide the element <code>knoraXmlImport:file</code> before the property elements. In this element, we must give the absolute filesystem path to the file that should be attached to the resource, along with its MIME type:</p>
<pre class="prettyprint"><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;knoraXmlImport:resources xmlns=&quot;http://api.knora.org/ontology/incunabula/xml-import/v1#&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://api.knora.org/ontology/incunabula/xml-import/v1# incunabula.xsd&quot;
    xmlns:incunabula=&quot;http://api.knora.org/ontology/incunabula/xml-import/v1#&quot;
    xmlns:knoraXmlImport=&quot;http://api.knora.org/ontology/knoraXmlImport/v1#&quot;&gt;
    &lt;incunabula:book id=&quot;test_book&quot;&gt;
        &lt;knoraXmlImport:label&gt;a book with one page&lt;/knoraXmlImport:label&gt;
        &lt;incunabula:title knoraType=&quot;richtext_value&quot;&gt;the title of a book with one page&lt;/incunabula:title&gt;
    &lt;/incunabula:book&gt;
    &lt;incunabula:page id=&quot;test_page&quot;&gt;
        &lt;knoraXmlImport:label&gt;a page with an image&lt;/knoraXmlImport:label&gt;
        &lt;knoraXmlImport:file path=&quot;/usr/local/share/import-images/incunabula/12345.tiff&quot; mimetype=&quot;image/tiff&quot;/&gt;
        &lt;incunabula:origname knoraType=&quot;richtext_value&quot;&gt;Chlaus&lt;/incunabula:origname&gt;
        &lt;incunabula:pagenum knoraType=&quot;richtext_value&quot;&gt;1a&lt;/incunabula:pagenum&gt;
        &lt;incunabula:partOf&gt;
            &lt;incunabula:book knoraType=&quot;link_value&quot; linkType=&quot;ref&quot; ref=&quot;test_book&quot;/&gt;
        &lt;/incunabula:partOf&gt;
        &lt;incunabula:seqnum knoraType=&quot;int_value&quot;&gt;1&lt;/incunabula:seqnum&gt;
    &lt;/incunabula:page&gt;
&lt;/knoraXmlImport:resources&gt;
</code></pre>
<p>During the processing of the bulk import, Knora will communicate the location of file to Sipi, which will convert it to JPEG 2000 for storage.</p>
</div>
<div>
<a href="https://github.com/dhlab-basel/Knora/tree/master/docs/src/paradox/03-apis/api-v1/adding-resources.md" title="Edit this page" class="md-source-file md-edit">
Edit this page
</a>
</div>
<div class="print-only">
<span class="md-source-file md-version">
10.0.0
</span>
</div>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-nav">
<nav class="md-footer-nav__inner md-grid">
<a href="../../03-apis/api-v1/xml-to-standoff-mapping.html" title="XML to Standoff Mapping in API v1" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
</div>
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Previous
</span>
XML to Standoff Mapping in API v1
</span>
</div>
</a>
<a href="../../03-apis/api-v1/reading-values.html" title="Reading Values" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
<div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
<span class="md-flex__ellipsis">
<span class="md-footer-nav__direction">
Next
</span>
Reading Values
</span>
</div>
<div class="md-flex__cell md-flex__cell--shrink">
<i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
</div>
</a>
</nav>
</div>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-footer-copyright">
<div class="md-footer-copyright__highlight">
Copyright 2015-2019 the contributors (see Contributors.md)
</div>
Powered by
<a href="https://github.com/lightbend/paradox">Paradox</a>
and
<a href="https://jonas.github.io/paradox-material-theme/">Paradox Material Theme</a>

</div>
<div class="md-footer-social">
<a href="https://github.com/dhlab-basel" class="md-footer-social__link fa fa-github"></a><a href="https://twitter.com/dhlabbasel" class="md-footer-social__link fa fa-twitter"></a>
</div>

</div>
</div>
</footer>

</div>
<script src="../../assets/javascripts/application.5165553b.js"></script>
<script src="../../assets/javascripts/paradox-material-theme.js"></script>
<script>app.initialize({version:"0.17",url:{base:"../../."}})</script>
<script type="text/javascript" src="../../lib/prettify/prettify.js"></script>
<script type="text/javascript" src="../../lib/prettify/lang-scala.js"></script>
<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function(event) {
window.prettyPrint && prettyPrint();
});
</script>
</body>
</html>
